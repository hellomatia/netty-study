# 이벤트 모델

## 이벤트 루프
통상적인 이벤트 기밙 애플리케이션의 이벤트를 처리하는 방법은 크게 두 가징이다. 

**1. 이벤트 리스너와 이벤트 처리 스레드에 기반한 방법**

- 대부분의 UI 처리 프레임워크가 사용한다.
- 이벤트 메서드를 대상 객체의 이벤트 리스너에 등록하고, 객체에 이벤트가 발생했을 때 이벤트 처리 스레드에서 등록된 메서드를 수행한다.


**2. 이벤트 큐에 이벤트를 등록하고 이벤트 루프가 이벤트 큐에 접근하여 처리하는 방법**

- 프레임워크의 구현이 복잡하지만 프레임워크의 사용자 입장에서는 더 간단하게 사용할 수 있다.

**이벤트 루프란?**
- 이벤트를 실행하기 위해 무한루프 스레드를 지칭한다.

이벤트 루프가 지원하는 스레드 종류에 따라 단일 스레드 이벤트 루프와 다중 스레드 이벤트 루프로 나뉜다.

그리고 이벤트 루프가 처리의 결과를 돌려주는 방식에 따라서 콜백 패턴과 퓨천 패턴으로 나뉜다. (네티에서는 이 두가지 모두 지원한다.)


### 단일 스레드와 다중 스레드 이벤트 루프

**단일 스레드 이벤트 루프**
- 이벤트를 처리하는 스레드가 하나인 상태를 말한다.
- 구현이 단순하고 예측 가능한 동작을 보장한다.
- 다중 코어 CPU를 효율적으로 활용하지 못한다.
- node.js와 같은 애플리케이션을 효율적으로 운영하려고 여러 개의 인스턴스를 실행하기도 한다.

**다중 스레드 이벤트 루프**
- 이벤트를 처리하는 스레드가 여러 개이다.
- 구현난이도고 복잡하다. 
- 여러 이벤트 루프 스레드가 이벤트 큐 하나에 접근하여 여러 스레드가 자원 하나를 공유할 때 발생하는 스레드 경합이 발생한다.
- CPU를 효율적으로 사용한다.
- 이벤트 발생 순서와 실행 순서가 일치 하지 않는다.
- 컨텍스트 스위칭 비용과 스레드 경합이라는 단점이 존재한다.
